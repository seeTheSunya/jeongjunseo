<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸°ìˆ™ì‚¬ìƒ ì»¤ë®¤ë‹ˆ D</title>
    <!-- Vue.js CDN -->
    <script src="https://unpkg.com/vue@3"></script>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- â˜…â˜…â˜… [ì¶”ê°€] Axios CDN: Spring Boot ì„œë²„ì™€ í†µì‹ (HTTP ìš”ì²­)ì„ ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤. â˜…â˜…â˜… -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    
    <style>
        /* ëª¨ë‹¬ ë°°ê²½ì„ ìœ„í•œ ìŠ¤íƒ€ì¼ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- (í—¤ë”, ë©”ì¸ ì»¨í…ì¸ , ë¡œê·¸ì¸ ëª¨ë‹¬ ë“± ê¸°ì¡´ HTML... ë³€ê²½ ì—†ìŒ) -->
		<div class="min-h-screen bg-gray-100 font-sans">
			<header class="bg-white shadow-sm">
			    <div class="container mx-auto px-6 py-4 flex items-center justify-between">
			        <h1 class="text-2xl font-bold text-gray-800">ê¸°ìˆ™ì‚¬ìƒ ì»¤ë®¤ë‹ˆí‹°</h1>
			        <button @click="showLogin = true" 
			                class="bg-white text-blue-600 font-semibold px-4 py-2 rounded hover:bg-gray-200">
			            ë¡œê·¸ì¸
			        </button>
			    </div>
			</header>

            <main class="container mx-auto p-4 md:p-6 pb-12">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <board-section title="ğŸ“¢ ê³µë™êµ¬ë§¤ ê²Œì‹œíŒ" :posts="groupPurchasePosts" @add-post="openModal"></board-section>
                    <board-section title="â­ ì‚¬ìš© í›„ê¸° ê²Œì‹œíŒ" :posts="reviewPosts" @add-post="openModal"></board-section>
                    <board-section title="ğŸ³ ê¸°ìˆ™ì‚¬ ë ˆì‹œí”¼" :posts="recipePosts" @add-post="openModal"></board-section>
                    <board-section title="ğŸ’¡ ìƒí™œ ê¿€íŒ" :posts="tipPosts" @add-post="openModal"></board-section>
                    <board-section title="ğŸ’¬ ê³ ë¯¼ìƒë‹´ì†Œ" :posts="counselingPosts" class="md:col-span-2" @add-post="openModal"></board-section>
                </div>
            </main>
        </div>
		<div v-if="showLogin" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
		    <div class="bg-white p-6 rounded shadow-lg w-96">
		        <h2 class="text-xl font-bold mb-4">ë¡œê·¸ì¸</h2>
		        <form @submit.prevent="login">
		            <div class="mb-4">
		                <label class="block mb-1">ì•„ì´ë””</label>
		                <input type="text" v-model="username" class="w-full border px-2 py-1 rounded" required>
		            </div>
		            <div class="mb-4">
		                <label class="block mb-1">ë¹„ë°€ë²ˆí˜¸</label>
		                <input type="password" v-model="password" class="w-full border px-2 py-1 rounded" required>
		            </div>
		            <div class="flex justify-end space-x-2">
		                <button type="button" @click="showLogin = false" 
		                        class="px-4 py-2 rounded bg-gray-300 hover:bg-gray-400">ì·¨ì†Œ</button>
		                <button type="submit" 
		                        class="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700">ë¡œê·¸ì¸</button>
						<button type="button" @click="showSignup = true"
								class="px-4 py-2 rounded bg-green-600 text-white font-semibold hover:bg-green-700">
								    íšŒì›ê°€ì…</button>
		            </div>
		        </form>
		    </div>
		</div>
        
		<!-- íšŒì›ê°€ì… ëª¨ë‹¬ -->
		<div v-if="showSignup" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
		    <div class="bg-white p-6 rounded shadow-lg w-96 text-gray-800">
		        <h2 class="text-xl font-bold mb-4">íšŒì›ê°€ì…</h2>
                <!-- @submit.prevent="signup"ì€ ë³€ê²½ ì—†ì´ ê·¸ëŒ€ë¡œ ë‘¡ë‹ˆë‹¤. -->
		        <form @submit.prevent="signup">
		            <div class="mb-4">
		                <label class="block mb-1">ì•„ì´ë””</label>
		                <input type="text" v-model="regUsername" class="w-full border px-2 py-1 rounded" required>
		            </div>
		            <div class="mb-4">
		                <label class="block mb-1">ë¹„ë°€ë²ˆí˜¸</label>
		                <input type="password" v-model="regPassword" class="w-full border px-2 py-1 rounded" required>
		            </div>
		            <div class="mb-4">
		                <label class="block mb-1">ì´ë©”ì¼</label>
		                <input type="email" v-model="regEmail" class="w-full border px-2 py-1 rounded" required>
		            </div>
		            <div class="flex justify-end space-x-2">
		                <button type="button" @click="showSignup = false" class="px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-black">ì·¨ì†Œ</button>
		                <button type="submit" class="px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700">íšŒì›ê°€ì…</button>
		            </div>
		        </form>
		    </div>
		</div>


        <!-- ê¸€ ì‘ì„± ëª¨ë‹¬ (ë³€ê²½ ì—†ìŒ) -->
        <post-modal v-if="isModalVisible" 
            :board-title="currentBoardTitle" 
            @close="closeModal"
            @save="savePost">
        </post-modal>
    </div>

    <script>
        const { createApp } = Vue;

        // --- 1. ê²Œì‹œíŒ ì„¹ì…˜ ì»´í¬ë„ŒíŠ¸ ---
        const BoardSection = {
            props: ['title', 'posts'],
            // + ë²„íŠ¼ í´ë¦­ ì‹œ 'add-post' ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œì¼œ ë¶€ëª¨ì—ê²Œ ì•Œë¦½ë‹ˆë‹¤.
            template: `
                <div class="board-section bg-white rounded-lg shadow-sm border border-gray-200">
                    <div class="header flex justify-between items-center p-4 border-b border-gray-200">
                        <h2 class="text-lg font-semibold text-gray-700">{{ title }}</h2>
                        <button @click="$emit('add-post', title)" class="text-gray-400 hover:text-blue-500 text-2xl font-light" title="ìƒˆ ê¸€ ì‘ì„±">+</button>
                    </div>
                    <ul class="post-list p-4 space-y-3">
                        <li v-for="post in posts" :key="post.id" class="flex justify-between items-center text-sm">
                            <a href="#" class="text-gray-800 hover:text-blue-600 truncate pr-4">{{ post.title }}</a>
                            <span class="text-gray-500 flex-shrink-0">{{ post.date }}</span>
                        </li>
                        <!-- â˜…â˜…â˜… [ìˆ˜ì •ë¨] â˜…â˜…â˜…
                            'v="if=..."' ë¼ëŠ” ì˜¤íƒ€ê°€ ë°œìƒí•˜ì—¬ 'InvalidCharacterError'ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
                             'v-if'ë¡œ ìˆ˜ì •í•©ë‹ˆë‹¤.
                        -->
                        <li v-if="!posts || posts.length === 0" class="text-center text-gray-400 py-4">ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</li>
                    </ul>
                </div>
            `
        };

        // --- 2. ê¸€ ì‘ì„± ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸ (ë³€ê²½ ì—†ìŒ) ---
        const PostModal = {
            props: ['boardTitle'],
            emits: ['close', 'save'],
            data() {
                return {
                    newPostTitle: ''
                };
            },
            template: `
                <div class="modal-overlay" @click.self="$emit('close')">
                    <div class="bg-white rounded-lg shadow-xl w-11/12 md:w-1/2 lg:w-1/3">
                        <div class="p-6">
                            <h3 class="text-xl font-semibold mb-4">{{ boardTitle }} - ìƒˆ ê¸€ ì‘ì„±</h3>
                            <input v-model="newPostTitle" type="text" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" class="w-full p-2 border border-gray-300 rounded-md mb-4">
                            <textarea placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..." rows="5" class="w-full p-2 border border-gray-300 rounded-md"></textarea>
                        </div>
                        <div class="bg-gray-50 px-6 py-3 flex justify-end space-x-3">
                            <button @click="$emit('close')" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300">ì·¨ì†Œ</button>
                            <button @click="handleSave" class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600">ì €ì¥</button>
                        </div>
                    </div>
                </div>
            `,
            methods: {
                handleSave() {
                    if (!this.newPostTitle.trim()) {
                        alert('ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                        return;
                    }
                    this.$emit('save', this.newPostTitle);
                }
            }
        };

        // --- 3. ë©”ì¸ Vue ì•± ---
        const app = createApp({
            data() {
                return {
                    isModalVisible: false,
                    currentBoardTitle: null,
					showLogin: false,
					showSignup: false,
					username: '',
					password: '',
					regUsername: '',
					regPassword: '',
					regEmail: '',
                    groupPurchasePosts: [ { id: 1, title: 'OTT 1/N í•˜ì‹¤ ë¶„ êµ¬í•©ë‹ˆë‹¤', date: '09-19' }, { id: 2, title: 'ìƒìˆ˜ 100ê°œ ê³µë™êµ¬ë§¤', date: '09-18' }, { id: 3, title: 'A4ìš©ì§€ 1ë°•ìŠ¤ ì‚¬ì‹¤ ë¶„', date: '09-17' }, { id: 4, title: 'ìƒˆë¡œìš´ ë£¸ë©”ì´íŠ¸ ìš©í’ˆ ì„¸íŠ¸', date: '09-16' }, ],
                    reviewPosts: [ { id: 1, title: 'ì´ ìŠ¤íƒ ë“œ ì •ë§ ìœ ìš©í•´ìš”!', date: '09-19' }, { id: 2, title: 'ê°€ì„±ë¹„ ìµœê³ ì˜ ë©€í‹°íƒ­ í›„ê¸°', date: '09-17' }, { id: 3, title: 'ë¸”ë£¨íˆ¬ìŠ¤ ìŠ¤í”¼ì»¤ ë¹„ì¶”ì²œí•©ë‹ˆë‹¤', date: '09-16' }, ],
                    recipePosts: [ { id: 1, title: 'ì „ìë ˆì¸ì§€ 3ë¶„ ê³„ë€ì°œ', date: '09-18' }, { id: 2, title: 'ì´ˆê°„ë‹¨ ë§ˆí¬ì •ì‹ ë§Œë“¤ê¸°', date: '09-15' }, ],
                    tipPosts: [ { id: 1, title: 'ì¢ì€ ë°© ë„“ì–´ë³´ì´ê²Œ í•˜ëŠ” ê¿€íŒ', date: '09-19' }, { id: 2, title: 'ë¹¨ë˜ ëƒ„ìƒˆ ì•ˆ ë‚˜ê²Œ ë§ë¦¬ëŠ” ë²•', date: '09-18' }, { id: 3, title: 'ì°½ë¬¸ ë°©ì¶©ë§ ì…€í”„ ì²­ì†Œ', date: '09-17' }, { id: 4, title: 'ìˆ˜ë‚© ê³µê°„ 2ë°°ë¡œ ëŠ˜ë¦¬ê¸°', date: '09-15' }, ],
                    counselingPosts: [ { id: 1, title: 'ë£¸ë©”ì´íŠ¸ ì½”ê³¨ì´ê°€ ë„ˆë¬´ ì‹¬í•´ìš”', date: '09-19' }, { id: 2, title: 'ìƒˆë²½ì— ìê¾¸ ì†ŒìŒì´ ë“¤ë¦½ë‹ˆë‹¤', date: '09-16' }, { id: 3, title: 'ê³µìš© ì£¼ë°© ì‚¬ìš© í›„ ì •ë¦¬ë¥¼ ì•ˆí•´ìš”', date: '09-15' }, { id: 4, title: 'ì„¸íƒê¸° ì‚¬ìš© ì‹œê°„ì´ ìê¾¸ ê²¹ì³ìš”', date: '09-14' }, ]
                }
            },
            methods: {
                // (openModal, closeModal, savePost, login ë©”ì†Œë“œëŠ” ë³€ê²½ ì—†ìŒ)
                openModal(boardTitle) {
                    this.isModalVisible = true;
                    this.currentBoardTitle = boardTitle;
                },
                closeModal() {
                    this.isModalVisible = false;
                    this.currentBoardTitle = null;
                },
                savePost(newTitle) {
                    const today = new Date();
                    const month = String(today.getMonth() + 1).padStart(2, '0');
                    const day = String(today.getDate()).padStart(2, '0');
                    
                    const newPost = {
                        id: Date.now(),
                        title: newTitle,
                        date: `${month}-${day}`
                    };

                    switch (this.currentBoardTitle) {
                        case 'ğŸ“¢ ê³µë™êµ¬ë§¤ ê²Œì‹œíŒ':
                            this.groupPurchasePosts.unshift(newPost);
                            break;
                        case 'â­ ì‚¬ìš© í›„ê¸° ê²Œì‹œíŒ':
                            this.reviewPosts.unshift(newPost);
                            break;
                        case 'ğŸ³ ê¸°ìˆ™ì‚¬ ë ˆì‹œí”¼':
                            this.recipePosts.unshift(newPost);
                            break;
                        case 'ğŸ’¡ ìƒí™œ ê¿€íŒ':
                            this.tipPosts.unshift(newPost);
                            break;
                        case 'ğŸ’¬ ê³ ë¯¼ìƒë‹´ì†Œ':
                            this.counselingPosts.unshift(newPost);
                            break;
                    }

                    this.closeModal();
                },
				login() {
				        if (!this.username.trim() || !this.password.trim()) {
				            alert('ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
				            return;
				        }
				        alert(`ì•„ì´ë””: ${this.username}\në¹„ë°€ë²ˆí˜¸: ${this.password}`);
				        this.showLogin = false;
				        this.username = '';
				        this.password = '';
				    },
					
                    // â˜…â˜…â˜… [ìˆ˜ì •] signup ë©”ì†Œë“œ â˜…â˜…â˜…
                    // 'async' í‚¤ì›Œë“œë¥¼ ì¶”ê°€í•˜ì—¬ ë¹„ë™ê¸°(axios) ì²˜ë¦¬ë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤.
					async signup() {
                        // 1. ìœ íš¨ì„± ê²€ì‚¬ (ê¸°ì¡´ê³¼ ë™ì¼)
					    if (!this.regUsername.trim() || !this.regPassword.trim() || !this.regEmail.trim()) {
					        alert('ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
					        return;
					    }
                        
                        // 2. ì„œë²„ë¡œ ë³´ë‚¼ ë°ì´í„° ê°ì²´ ìƒì„±
                        const signupData = {
                            username: this.regUsername,
                            password: this.regPassword,
                            email: this.regEmail
                        };

                        try {
                            // 3. Spring Boot ì„œë²„ì— íšŒì›ê°€ì… ìš”ì²­
                            // (ì£¼ì˜: ì´ /api/register ì—”ë“œí¬ì¸íŠ¸ëŠ” ì´ì œ Spring Bootì—ì„œ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.)
                            
                            // â˜…â˜…â˜… [ìˆ˜ì •ë¨] â˜…â˜…â˜…
                            // 'Invalid URL' ì˜¤ë¥˜ëŠ” axiosê°€ ìš”ì²­ì„ ë³´ë‚¼ ê¸°ë³¸ (http://...) ì£¼ì†Œë¥¼ ëª¨ë¥´ê¸° ë•Œë¬¸ì— ë°œìƒí•©ë‹ˆë‹¤.
                            // '/api/register' (ìƒëŒ€ ê²½ë¡œ) ëŒ€ì‹  'http://localhost:8080/api/register' (ì ˆëŒ€ ê²½ë¡œ)ë¡œ ìˆ˜ì •í•©ë‹ˆë‹¤.
                            // (Spring Boot ì„œë²„ê°€ 8080 í¬íŠ¸ì—ì„œ ì‹¤í–‰ ì¤‘ì´ë¼ê³  ê°€ì •í•©ë‹ˆë‹¤.)
                            const response = await axios.post('http://localhost:8080/api/register', signupData);

                            // 4. ë°±ì—”ë“œ ìš”ì²­ ì„±ê³µ ì‹œ
                            alert('íšŒì›ê°€ì… ìš”ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\nì…ë ¥í•˜ì‹  ì´ë©”ì¼ ì£¼ì†Œë¡œ ì¸ì¦ ë§í¬ë¥¼ ë°œì†¡í–ˆìŠµë‹ˆë‹¤.\në©”ì¼í•¨ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
                            
                            // 5. ì„±ê³µ ì‹œ ëª¨ë‹¬ ë‹«ê³  í¼ ì´ˆê¸°í™” (ê¸°ì¡´ê³¼ ë™ì¼)
                            this.showRegister = false;
                            this.regUsername = '';
                            this.regPassword = '';
                            this.regEmail = '';

                        } catch (error) {
                            // 6. ë°±ì—”ë“œ ìš”ì²­ ì‹¤íŒ¨ ì‹œ
                            console.error('íšŒì›ê°€ì… ì‹¤íŒ¨:', error);
                            if (error.response) {
                                // ì„œë²„ê°€ êµ¬ì²´ì ì¸ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë³´ë‚¸ ê²½ìš° (ì˜ˆ: "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””")
                                // (ì´ê²ƒë„ Spring Bootì—ì„œ ì„¤ì •í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤)
                                alert(`íšŒì›ê°€IP ì‹¤íŒ¨: ${error.response.data.message || 'ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'}`);
                            } else {
                                // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë˜ëŠ” Spring Boot ì„œë²„ê°€ êº¼ì ¸ìˆëŠ” ê²½ìš°
                                alert('íšŒì›ê°€ì… ìš”ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. (ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•˜ì„¸ìš”.)');
                            }
                        }
					}
					
            }
        });

        // ì»´í¬ë„ŒíŠ¸ë“¤ì„ ì „ì—­ìœ¼ë¡œ ë“±ë¡
        app.component('board-section', BoardSection);
        app.component('post-modal', PostModal);
        
        app.mount('#app');
    </script>
</body>
</html>